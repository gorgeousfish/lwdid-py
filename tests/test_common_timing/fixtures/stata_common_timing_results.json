{
  "metadata": {
    "source": "Lee_Wooldridge_2023-main 3/1.lee_wooldridge_common_data.dta",
    "stata_version": "17",
    "generated_at": "2026-01-17",
    "reference": "Lee & Wooldridge (2023) Section 3, Procedure 3.1",
    "stata_script": "Lee_Wooldridge_2023-main 3/1.lee_wooldridge_rolling_common.do"
  },
  "data_info": {
    "T": 6,
    "S": 4,
    "first_treat_period": 4,
    "pre_treatment_periods": [1, 2, 3],
    "post_treatment_periods": [4, 5, 6],
    "transformation_formula": "y_dot = y - (L1.y + L2.y + L3.y)/3",
    "transformation_description": "Y_r - mean(Y_pre) where pre = {1,2,3}, denominator = S-1 = 3"
  },
  "sample_info": {
    "n_obs": 1000,
    "n_treated": 167,
    "n_control": 833,
    "total_panel_obs": 6000
  },
  "estimators": {
    "ra": {
      "stata_command": "teffects ra (y_dot x1 x2) (d) if f{period}, atet",
      "description": "Regression Adjustment",
      "f04": {
        "att": 4.0830643,
        "se": 0.41764992,
        "ci_lower": 3.264475,
        "ci_upper": 4.901654,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      },
      "f05": {
        "att": 5.0768895,
        "se": 0.45991541,
        "ci_lower": 4.175459,
        "ci_upper": 5.978320,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      },
      "f06": {
        "att": 6.5960774,
        "se": 0.48026091,
        "ci_lower": 5.654768,
        "ci_upper": 7.537387,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      }
    },
    "ipwra": {
      "stata_command": "teffects ipwra (y_dot x1 x2) (d x1 x2) if f{period}, atet",
      "description": "Inverse Probability Weighted Regression Adjustment (doubly robust)",
      "f04": {
        "att": 4.1236194,
        "se": 0.41718316,
        "ci_lower": 3.305941,
        "ci_upper": 4.941298,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      },
      "f05": {
        "att": 5.1070125,
        "se": 0.47030741,
        "ci_lower": 4.185210,
        "ci_upper": 6.028815,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      },
      "f06": {
        "att": 6.6221471,
        "se": 0.47140480,
        "ci_lower": 5.698194,
        "ci_upper": 7.546100,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      }
    },
    "psm": {
      "stata_command": "teffects psmatch (y_dot) (d x1 x2) if f{period}, atet",
      "description": "Propensity Score Matching (nearest neighbor, 1:1)",
      "se_method": "Abadie-Imbens",
      "vce_robust": {
        "description": "Stata vce(robust) - AI robust SE",
        "f04": {"att": 3.8732087, "se": 0.52604150},
        "f05": {"att": 4.7376414, "se": 0.60009824},
        "f06": {"att": 6.4185400, "se": 0.60701040}
      },
      "vce_iid": {
        "description": "Stata vce(iid) - matches Python abadie_imbens_full vce=iid exactly",
        "f04": {"att": 3.8732087, "se": 0.562178},
        "f05": {"att": 4.7376414, "se": 0.607674},
        "f06": {"att": 6.4185400, "se": 0.644340}
      },
      "f04": {
        "att": 3.8732087,
        "se": 0.52604150,
        "se_iid": 0.562178,
        "ci_lower": 2.842166,
        "ci_upper": 4.904251,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      },
      "f05": {
        "att": 4.7376414,
        "se": 0.60009824,
        "se_iid": 0.607674,
        "ci_lower": 3.561449,
        "ci_upper": 5.913834,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      },
      "f06": {
        "att": 6.4185400,
        "se": 0.60701040,
        "se_iid": 0.644340,
        "ci_lower": 5.228799,
        "ci_upper": 7.608281,
        "n_obs": 1000,
        "n_treated": 167,
        "n_control": 833
      }
    }
  },
  "tolerances": {
    "att_relative_error": 1e-6,
    "se_relative_error_ra_ipwra": 0.05,
    "se_relative_error_psm": 0.10,
    "transformation_absolute_error": 1e-10
  },
  "notes": {
    "lag_structure": {
      "f04": "L1.y, L2.y, L3.y at period 4 = y3, y2, y1",
      "f05": "L2.y, L3.y, L4.y at period 5 = y3, y2, y1",
      "f06": "L3.y, L4.y, L5.y at period 6 = y3, y2, y1"
    },
    "key_insight": "pre-mean is always mean(y1, y2, y3) regardless of evaluation period r"
  }
}
